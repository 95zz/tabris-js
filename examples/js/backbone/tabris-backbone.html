<!DOCTYPE html>
<!-- saved from url=(0027)#View -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width">
  <link rel="canonical" href="http://backbonejs.org/">
  <title>TabrisBackbone.js (Tabris-js enhancements for Backbone.js)</title>
  <style>
    body {
      font-size: 14px;
      line-height: 22px;
      font-family: Helvetica Neue, Helvetica, Arial;
      background: #f4f4f4 url(docs/images/background.png);
    }
    .interface {
      font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, sans-serif !important;
    }
    div#sidebar {
      background: #fff;
      position: fixed;
      z-index: 10;
      top: 0; left: 0; bottom: 0;
      width: 200px;
      overflow-y: auto;
      overflow-x: hidden;
      -webkit-overflow-scrolling: touch;
      padding: 15px 0 30px 30px;
      border-right: 1px solid #bbb;
      box-shadow: 0 0 20px #ccc; -webkit-box-shadow: 0 0 20px #ccc; -moz-box-shadow: 0 0 20px #ccc;
    }
      a.toc_title, a.toc_title:visited {
        display: block;
        color: black;
        font-weight: bold;
        margin-top: 15px;
      }
        a.toc_title:hover {
          text-decoration: underline;
        }
        #sidebar .version {
          font-size: 10px;
          font-weight: normal;
        }
      ul.toc_section {
        font-size: 11px;
        line-height: 14px;
        margin: 5px 0 0 0;
        padding-left: 0px;
        list-style-type: none;
        font-family: Lucida Grande;
      }
        .toc_section li {
          cursor: pointer;
          margin: 0 0 3px 0;
        }
          .toc_section li a {
            text-decoration: none;
            color: black;
          }
            .toc_section li a:hover {
              text-decoration: underline;
            }
    div.container {
      position: relative;
      width: 550px;
      margin: 40px 0 50px 260px;
    }
    img#logo {
      width: 450px;
      height: 80px;
    }
    div.run {
      position: absolute;
      right: 15px;
      width: 26px; height: 18px;
      background: url('docs/images/arrows.png') no-repeat -26px 0;
    }
      div.run:active {
        background-position: -51px 0;
      }
    p, div.container ul {
      margin: 25px 0;
      width: 550px;
    }
      p.warning {
        font-size: 12px;
        line-height: 18px;
        font-style: italic;
      }
      div.container ul {
        list-style: circle;
        padding-left: 15px;
        font-size: 13px;
        line-height: 18px;
      }
        div.container ul li {
          margin-bottom: 10px;
        }
        div.container ul.small {
          font-size: 12px;
        }
    a, a:visited {
      color: #444;
    }
    a:active, a:hover {
      color: #000;
    }
    a.punch {
      display: inline-block;
      background: #4162a8;
      border-top: 1px solid #38538c;
      border-right: 1px solid #1f2d4d;
      border-bottom: 1px solid #151e33;
      border-left: 1px solid #1f2d4d;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      -ms-border-radius: 4px;
      -o-border-radius: 4px;
      border-radius: 4px;
      -webkit-box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      -moz-box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      -ms-box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      -o-box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      color: #fff;
      font: bold 14px "helvetica neue", helvetica, arial, sans-serif;
      line-height: 1;
      margin-bottom: 15px;
      padding: 8px 0 10px 0;
      text-align: center;
      text-shadow: 0px -1px 1px #1e2d4d;
      text-decoration: none;
      width: 225px;
      -webkit-background-clip: padding-box; }
      a.punch:hover {
        -webkit-box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        -moz-box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        -ms-box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        -o-box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        cursor: pointer; }
      a.punch:active {
        -webkit-box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        -moz-box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        -ms-box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        -o-box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        margin-top: 5px; margin-bottom: 10px }
    a img {
      border: 0;
    }
    a.travis-badge {
      display: block;
    }
    h1, h2, h3, h4, h5, h6 {
      padding-top: 20px;
    }
      h2 {
        font-size: 22px;
      }
    b.header {
      font-size: 18px;
      line-height: 35px;
    }
    span.alias {
      font-size: 14px;
      font-style: italic;
      margin-left: 20px;
    }
    table {
      margin: 15px 0 0; padding: 0;
    }
      tr, td {
        margin: 0; padding: 0;
      }
        td {
          padding: 0px 15px 5px 0;
        }
        table .rule {
          height: 1px;
          background: #ccc;
          margin: 5px 0;
        }
    code, pre, tt {
      font-family: Monaco, Consolas, "Lucida Console", monospace;
      font-size: 12px;
      line-height: 18px;
      font-style: normal;
    }
      tt {
        padding: 0px 3px;
        background: #fff;
        border: 1px solid #ddd;
        zoom: 1;
      }
      code {
        margin-left: 20px;
      }
      pre {
        font-size: 12px;
        padding: 2px 0 2px 15px;
        border: 4px solid #bbb; border-top: 0; border-bottom: 0;
        margin: 0px 0 25px;
        overflow-x: scroll;
      }
      img.example_image {
        margin: 0px auto;
      }
        img.example_retina {
          margin: 20px;
          box-shadow: 0 8px 15px rgba(0,0,0,0.4);
        }
    @media only screen and (-webkit-max-device-pixel-ratio: 1) and (max-width: 600px),
           only screen and (max--moz-device-pixel-ratio: 1) and (max-width: 600px) {
      div#sidebar {
        display: none;
      }
      img#logo {
        max-width: 450px;
        width: 100%;
        height: auto;
      }
      div.container {
        width: auto;
        margin-left: 15px;
        margin-right: 15px;
      }
        p, div.container ul {
          width: auto;
        }
    }
    @media only screen and (-webkit-min-device-pixel-ratio: 1.5) and (max-width: 640px),
          only screen and (-o-min-device-pixel-ratio: 3/2) and (max-width: 640px),
          only screen and (min-device-pixel-ratio: 1.5) and (max-width: 640px) {
      img {
        max-width: 100%;
        height: auto;
      }
      div#sidebar {
        -webkit-overflow-scrolling: initial;
        position: relative;
        width: 90%;
        height: 120px;
        left: 0;
        top: -7px;
        padding: 10px 0 10px 30px;
        border: 0;
      }
      img#logo {
        width: auto;
        height: auto;
      }
      div.container {
        margin: 0;
        width: 100%;
      }
      p, div.container ul {
        max-width: 98%;
        overflow-x: scroll;
      }
      table {
        position: relative;
      }
        tr:first-child td {
          padding-bottom: 25px;
        }
        td.text {
          line-height: 12px;
          padding: 0;
          position: absolute;
          left: 0;
          top: 48px;
        }
        tr:last-child td.text {
          top: 122px;
        }
      pre {
        overflow: scroll;
      }
    }
  </style>
</head>
<body>

  <div id="sidebar" class="interface">

    <a class="toc_title" href="#">
      TabrisBackbone.js
    </a>
    <ul class="toc_section">
      <li>» <a href="http://github.com/jashkenas/backbone">Original GitHub Repository</a></li>
      <li>» <a href="http://backbonejs.org/docs/backbone.html">Original Annotated Source</a></li>
    </ul>

    <a class="toc_title" href="#View">
      View
    </a>
    <ul class="toc_section">
      <li>– <a href="#View-extend">extend</a></li>
      <li>– <a href="#View-constructor">constructor / initialize</a></li>
      <li>– <a href="#View-widget">widget</a></li>
      <li>– <a href="#View-setWidget">setWidget</a></li>
      <li>– <a href="#View-attributes">attributes</a></li>
      <li>– <a href="#View-render">render</a></li>
      <li>– <a href="#View-remove">remove</a></li>
      <li>– <a href="#View-delegateEvents">delegateEvents</a></li>
      <li>– <a href="#View-undelegateEvents">undelegateEvents</a></li>
    </ul>

  </div>

  <div class="container">

  <h2>TabrisBackbone.js</h2>

  <p>
      Backbone.js gives structure to web applications
      by providing <b>models</b> with key-value binding and custom events,
      <b>collections</b> with a rich API of enumerable functions,
      <b>views</b> with declarative event handling, and connects it all to your
      existing API over a RESTful JSON interface.
    </p>

    <p>
      The project is <a href="http://github.com/jashkenas/backbone/">hosted on GitHub</a>,
      and the <a href="http://backbonejs.org/docs/backbone.html">annotated source code</a> is available,
      as well as an online <a href="http://backbonejs.org/test/">test suite</a>,
      an <a href="http://backbonejs.org/examples/todos/index.html">example application</a>,
      a <a href="https://github.com/jashkenas/backbone/wiki/Tutorials%2C-blog-posts-and-example-sites">list of tutorials</a>
      and a <a href="http://backbonejs.org/#examples">long list of real-world projects</a> that use Backbone.
      Backbone is available for use under the <a href="http://github.com/jashkenas/backbone/blob/master/LICENSE">MIT software license</a>.
    </p>

    <p>
      <i>
        Backbone is an open-source component of
        <a href="http://documentcloud.org/">DocumentCloud</a>.
      </i>
    </p>

    <p>
      This document covers changes made to Backbone by <b>TabrisBackbone.js</b> to make it
      suitable for application development in the tabris-js environment. The document is meant to
      work as a <i>supplement</i> to the <a href="http://backbonejs.org">original Backbone
      documentation</a>. The sections below are rewrites that <i>replace</i> the same sections
      of the original document. If a section is missing in this document, then the original text
      is likely still valid when using Backbone with Tabris. (Except for any references to
      jQuery, HTML, DOM, CSS or the browser history.)
    </p>

    <h2 id="downloads">
      Dependencies
    </h2>

    <p>
      To use backbone in your tabris-js project, your index.json should look like this:
    </p>

<pre>
{
  "resources": [
    {
      "src": "http://download.eclipsesource.com/technology/tabris/js/current/tabris.js"
    },
    {
      "src": "http://underscorejs.org/underscore-min.js"
    },
    {
      "src": "http://backbonejs.org/backbone-min.js"
    },
    {
      "src": "TabrisBackbone.js"
    },
    {
      "src": "myApp.js"
    }
  ]
}
</pre>

    <h2 id="View">Backbone.View</h2>

    <p>
      Backbone views are almost more convention than they are code — they
      don't determine anything about your UI for you.
      The general idea is to organize your interface into logical views,
      backed by models, each of which can be updated independently when the
      model changes. Instead of digging into
      a JSON object, looking up all relevant widgets and then updating them by hand,
      you can bind your view's <tt>render</tt> function to the model's <tt>"change"</tt>
      event — and now everywhere that
      model data is displayed in the UI, it is always immediately up to date.
    </p>

    <p id="View-extend">
      <b class="header">extend</b><code>Backbone.View.extend(properties, [classProperties])</code>
      <br>
      Get started with views by creating a custom view class. You'll want to
      override the <a href="#View-render">render</a> function, specify your
      declarative <a href="#View-delegateEvents">events</a>, and perhaps the
      <tt>widgetType</tt> and default <tt>attributes</tt> of the View's root
      widget.
    </p>

<pre>var DocumentRow = Backbone.View.extend({

  widgetType: "Label",

  attributes: {
    "backgroundColor" : "yellow"
  },

  events: {
    "MouseDown": "edit"
  },

  initialize: function() {
    this.listenTo(this.model, "change", this.render);
  },

  render: function() {
    ...
  }

});
</pre>

    <p>
      Properties like <tt>widgetType</tt>, <tt>attributes</tt>, <tt>widget</tt>, and <tt>events</tt> may also be defined as a function, if
      you want to wait to define them until runtime.
    </p>

    <p id="View-constructor">
      <b class="header">constructor / initialize</b><code>new View([options])</code>
      <br>
      There are several special
      options that, if passed, will be attached directly to the view:
      <tt>model</tt>,
      <tt>collection</tt>,
      <tt>widget</tt>,
      <tt>parentWidget</tt>,
      <tt>parentView</tt>,
      <tt>attributes</tt>,
      <tt>widgetType</tt>,
      and <tt>events</tt>.

      If the view defines an <b>initialize</b> function, it will be called with the options
      object when
      the view is first created. If you'd like to create a view that references
      a widget that is <i>already created</i>, pass in the widget as an option:
      <tt>new View({widget: existingWidget})</tt>. If you don't do so, you have
      to provide either an <tt>parentWidget</tt> or a <tt>parentView</tt>. You may
      also want to provide <tt>layoutData</tt> for the widget. (You could also provide
      it in the <tt>attributes</tt> object, but since <tt>layoutData</tt> is almost always
      needed it can also be set as an option directly.)
    </p>

<pre>var doc = documents.first();

new DocumentRow({
  model: doc,
  parentWidget: page,
  layoutData: { top: 0, left: 10 }
});
</pre>

    <p id="View-widget">
      <b class="header">widget</b><code>view.widget</code>
      <br>
      All views have a root widget at all times (the <b>widget</b> property).
      <ins>(TB: Could it be useful to be able to initialize a view lazily?)</ins>
      If no widget is given in the constructor, <tt>this.widget</tt> is created from the
      view's <tt>widgetType</tt> and <tt>attributes</tt> properties,
      if specified. If not, <b>widget</b> will be an empty <tt>Composite</tt>. It is attached to the
      given <tt>parentWidget</tt> or <tt>parentView</tt>. If both are given, <tt>parentWidget</tt>
      is used. If <tt>parentView</tt> is used, the new widget is attached to<tt>parentView.widget</tt>
      or to <tt>parentView.container</tt> (if present).
    </p>

<div class="run" title="Run"></div><pre class="runnable">var ItemView = Backbone.View.extend({
  widgetType: 'label'
});

var BodyView = Backbone.View.extend({
  initialize : function() {
    this.container = this.widget.append("Composite");
  }
});

var body = new BodyView({parentWidget: page);
var item = new ItemView({parentView: body});

// we now have: page->body.widget->body.composite->item.widget
</pre>

    <p id="View-setWidget">
      <b class="header">setWidget</b><code>view.setWidget(widget)</code>
      <br>
      If you'd like to apply a Backbone view to a different widget, use
      <b>setWidget</b>, which will move the view's delegated events from the old widget to the new
      one.
      The attributes and layoutData will not be applied again.
      The old widget will not be changed in any other way.
    </p>

    <p id="View-attributes">
      <b class="header">attributes</b><code>view.attributes</code>
      <br>
      A hash of attributes that will be set as widget attributes on the
      view's <tt>widget</tt>, or a function that returns such a hash.
      May be provided in the constructor options or when extending <tt>Backbone.View</tt>.
      The attributes are applied no matter how the widget was created.
    </p>

    <p id="View-render">
      <b class="header">render</b><code>view.render()</code>
      <br>
      The default implementation of <b>render</b> is a no-op. Override this
      function with your code that renders the views widgets from model data. A good
      convention is to <tt>return this</tt> at the end of <b>render</b> to
      enable chained calls.
    </p>

<pre>var Bookmark = Backbone.View.extend({
  render: function() {
    this.widget.set( "text", this.model.get("name"));
    return this;
  }
});
</pre>

    <p>
      You can also use <a href="http://underscorejs.org/#template">_.template</a>
      to create text from your model. Store the templates in an separate file
      to allow for internationalization.
    </p>

    <p id="View-remove">
      <b class="header">remove</b><code>view.remove()</code>
      <br>
      Disposes the views root widget and calls
      <a href="http://backbonejs.org/#Events-stopListening">stopListening</a> to remove any bound
      events that the view has <a href="http://backbonejs.org/#Events-listenTo">listenTo</a>'d.
    </p>

    <p id="View-delegateEvents">
      <b class="header">delegateEvents</b><code>delegateEvents([events])</code>
      <br>
      Uses widget <tt>on</tt> function to provide declarative callbacks
      for widget events within a view.
      If an <b>events</b> hash is not passed directly, uses <tt>this.events</tt>
      as the source. Events are written in the format <tt>{"event selector": "callback"}</tt>.
      The callback may be either the name of a method on the view, or a direct
      function body. The selector is interpreted as a property of the view instance referencing
      a widget. (I.e. <tt>{"Modify text": "editing"}</tt> adds <tt>this.editing</tt> as a listener
      for <tt>Modify</tt> to <tt>this.text</tt>.)
      Omitting the <tt>selector</tt> causes the event to be attached to the view's
      root element (<tt>this.widget</tt>). <em>Listener are automatically bound to the view,
      meaning within the listener <tt>this</tt> still refers to the view instance object.</em>
    </p>
    <p>
      By default, <tt>delegateEvents</tt> is called
      within the View's constructor for you (after initialization), so if you have a simple
      <tt>events</tt> hash, all of your events will always already be connected. If any widgets or
      functions specified in <tt>events</tt> are missing they will simply be skipped. If the missing
      widgets/functions are created later, <tt>delegateEvents</tt> will have to be called
      again manually.
    </p>

    <p>
      The <tt>events</tt> property may also be defined as a function that returns
      an <b>events</b> hash, to make it easier to programmatically define your
      events, as well as inherit them from parent views.
    </p>

    <p>
      A view that displays a document in a search result might look
      something like this:
    </p>


    <p id="View-undelegateEvents">
      <b class="header">undelegateEvents</b><code>undelegateEvents()</code>
      <br>
      Removes all of the view's delegated events. Potentially useful if you want to disable
      or hide a view temporarily.
    </p>

</body></html>
